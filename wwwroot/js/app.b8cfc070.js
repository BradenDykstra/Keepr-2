(function(e){function t(t){for(var a,i,n=t[0],c=t[1],l=t[2],p=0,d=[];p<n.length;p++)i=n[p],o[i]&&d.push(o[i][0]),o[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(d.length)d.shift()();return r.push.apply(r,l||[]),s()}function s(){for(var e,t=0;t<r.length;t++){for(var s=r[t],a=!0,i=1;i<s.length;i++){var c=s[i];0!==o[c]&&(a=!1)}a&&(r.splice(t--,1),e=n(n.s=s[0]))}return e}var a={},o={app:0},r=[];function i(e){return n.p+"js/"+({myKeeps:"myKeeps",vault:"vault",vaults:"vaults"}[e]||e)+"."+{myKeeps:"0f27c327",vault:"fb5e9214",vaults:"89a43cc2"}[e]+".js"}function n(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.e=function(e){var t=[],s=o[e];if(0!==s)if(s)t.push(s[2]);else{var a=new Promise(function(t,a){s=o[e]=[t,a]});t.push(s[2]=a);var r,c=document.createElement("script");c.charset="utf-8",c.timeout=120,n.nc&&c.setAttribute("nonce",n.nc),c.src=i(e),r=function(t){c.onerror=c.onload=null,clearTimeout(l);var s=o[e];if(0!==s){if(s){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src,i=new Error("Loading chunk "+e+" failed.\n("+a+": "+r+")");i.type=a,i.request=r,s[1](i)}o[e]=void 0}};var l=setTimeout(function(){r({type:"timeout",target:c})},12e4);c.onerror=c.onload=r,document.head.appendChild(c)}return Promise.all(t)},n.m=e,n.c=a,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(s,a,function(t){return e[t]}.bind(null,a));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var p=0;p<c.length;p++)t(c[p]);var u=l;r.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"034f":function(e,t,s){"use strict";var a=s("64a9"),o=s.n(a);o.a},"1a47":function(e,t,s){"use strict";var a=s("99fd"),o=s.n(a);o.a},"4b2f":function(e,t,s){"use strict";var a=s("8079"),o=s.n(a);o.a},"56d7":function(e,t,s){"use strict";s.r(t);var a=s("2b0e"),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},r=[],i=(s("034f"),s("2877")),n={},c=Object(i["a"])(n,o,r,!1,null,null,null),l=c.exports,p=s("8c4f"),u=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"home"},[s("div",{staticClass:"row justify-content-center"},[s("div",{staticClass:"col-2"}),e.user.id?s("h1",{staticClass:"text-light mt-3 col-8"},[e._v("Welcome Home, "+e._s(e.user.username)+"!")]):s("h1",{staticClass:"text-light mt-3 col-8"},[e._v("Welcome to ToastKeepr!")]),s("div",{staticClass:"col-2 mt-5"},[e.user.id?s("dropDown"):e._e()],1)]),s("div",{staticClass:"row justify-content-center"},[e.user.id?s("button",{staticClass:"btn-danger badge-pill",on:{click:e.logout}},[e._v("logout")]):s("button",{staticClass:"btn-primary badge-pill",attrs:{"data-toggle":"modal","data-target":"#loginModal"}},[e._v("Login")]),s("login")],1),s("hr",{staticClass:"bg-light"}),s("div",{staticClass:"row justify-content-around mt-2"},e._l(e.keeps,function(e){return s("keepComp",{key:e.id,staticClass:"col-3",attrs:{keepProp:e}})}))])},d=[],m=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login modal fade",attrs:{id:"loginModal",tabindex:"-1",role:"dialog"}},[s("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[s("h1",{staticClass:"my-5"},[e._v("Welcome to ToastKeepr!")]),e.loginForm?s("form",{staticClass:"justify-content-center",on:{submit:function(t){return t.preventDefault(),e.loginUser(t)}}},[s("div",{staticClass:"row"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.creds.email,expression:"creds.email"}],staticClass:"form-control col-8 offset-2 my-2",attrs:{type:"email",placeholder:"email"},domProps:{value:e.creds.email},on:{input:function(t){t.target.composing||e.$set(e.creds,"email",t.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.creds.password,expression:"creds.password"}],staticClass:"form-control col-8 offset-2 my-2",attrs:{type:"password",placeholder:"password"},domProps:{value:e.creds.password},on:{input:function(t){t.target.composing||e.$set(e.creds,"password",t.target.value)}}})]),s("div",{staticClass:"row"},[s("button",{staticClass:"btn-success badge-pill col-2 offset-5 my-3",attrs:{type:"submit"},on:{click:e.close}},[e._v("Login")])])]):s("form",{staticClass:"justify-content-center",on:{submit:function(t){return t.preventDefault(),e.register(t)}}},[s("div",{staticClass:"row"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.username,expression:"newUser.username"}],staticClass:"form-control col-8 offset-2 my-2",attrs:{type:"text",placeholder:"name"},domProps:{value:e.newUser.username},on:{input:function(t){t.target.composing||e.$set(e.newUser,"username",t.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.email,expression:"newUser.email"}],staticClass:"form-control col-8 offset-2 my-2",attrs:{type:"email",placeholder:"email"},domProps:{value:e.newUser.email},on:{input:function(t){t.target.composing||e.$set(e.newUser,"email",t.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.password,expression:"newUser.password"}],staticClass:"form-control col-8 offset-2 my-2",attrs:{type:"password",placeholder:"password"},domProps:{value:e.newUser.password},on:{input:function(t){t.target.composing||e.$set(e.newUser,"password",t.target.value)}}})]),s("div",{staticClass:"row"},[s("button",{staticClass:"btn-warning badge-pill col-2 offset-5 my-3",attrs:{type:"submit"},on:{click:e.close}},[e._v("Create Account")])])]),s("div",{on:{click:function(t){e.loginForm=!e.loginForm}}},[e.loginForm?s("p",[e._v("No account? Click to Register")]):s("p",[e._v("Already have an account? Click to Login")])])])])])},h=[],g={name:"login",data(){return{loginForm:!0,creds:{email:"",password:""},newUser:{email:"",password:"",username:""}}},beforeCreate(){this.$store.state.user.id&&this.$router.push({name:"home"})},methods:{register(){this.$store.dispatch("register",this.newUser)},loginUser(){this.$store.dispatch("login",this.creds)},close(){$("#loginModal").modal("hide")}}},v=g,f=Object(i["a"])(v,m,h,!1,null,null,null),w=f.exports,y=s("8dc0"),k=s("ee9c"),C={name:"home",computed:{user(){return this.$store.state.user},keeps(){return this.$store.state.keeps}},mounted(){this.$store.dispatch("getKeeps"),this.$store.dispatch("getVaults"),$(function(){$('[data-toggle="tooltip"]').tooltip()})},methods:{logout(){this.$store.dispatch("logout")},goToKeeps(){this.$router.push("/")},goToVaults(){this.$router.push("/vaults")}},components:{keepComp:y["a"],dropDown:k["a"],login:w}},b=C,K=(s("cccb"),Object(i["a"])(b,u,d,!1,null,null,null)),_=K.exports;a["a"].use(p["a"]);var P=new p["a"]({routes:[{path:"/",name:"home",component:_},{path:"/vaults",name:"vaults",component:function(){return s.e("vaults").then(s.bind(null,"26da"))}},{path:"/vault/:id",name:"vault",component:function(){return s.e("vault").then(s.bind(null,"1035"))}},{path:"/myKeeps",name:"myKeeps",component:function(){return s.e("myKeeps").then(s.bind(null,"dc38"))}}]}),x=s("2f62"),V=s("bc3a"),U=s.n(V);let j=location.host.includes("localhost")?"https://localhost:5001/":"/",T=U.a.create({baseURL:j+"account/",timeout:3e3,withCredentials:!0});class O{static async Login(e){try{let s=await T.post("login",e);return s.data}catch(t){throw new Error("[login failed] :"+t.response.data)}}static async Register(e){try{let s=await T.post("register",e);return s.data}catch(t){throw new Error("[registration failed] :"+t.response.data)}}static async Logout(){try{await T.delete("logout");return!0}catch(e){throw new Error("[logout failed] :"+e.response.data)}}static async Authenticate(){try{let t=await T.get("authenticate");return t.data}catch(e){console.warn("[Authentication failed] :"+e.response.data)}}}a["a"].use(x["a"]);let B=location.host.includes("localhost")?"https://localhost:5001/":"/",E=U.a.create({baseURL:B+"api/",timeout:3e3,withCredentials:!0});var M=new x["a"].Store({state:{user:{},keeps:[],keep:{},vaults:[],vault:{}},mutations:{setUser(e,t){e.user=t},resetState(e){e.user={},e.vaults=[],e.vault={}},setKeeps(e,t){e.keeps=t.reverse()},setVault(e,t){e.vault=t},setVaults(e,t){e.vaults=t}},actions:{async register({commit:e,dispatch:t},s){try{let t=await O.Register(s);e("setUser",t),P.push({name:"home"})}catch(a){console.warn(a.message)}},async login({commit:e,dispatch:t},s){try{let t=await O.Login(s);e("setUser",t),P.push({name:"home"})}catch(a){console.warn(a.message)}},async logout({commit:e,dispatch:t}){try{await O.Logout();e("resetState")}catch(s){console.warn(s.message)}},
//!SECTION 
async getKeeps({commit:e,dispatch:t}){try{let t=await E.get("keeps");e("setKeeps",t.data)}catch(s){console.error(s)}},async getOneKeep({commit:e,dispatch:t},s){try{let t=await E.get("keeps/"+s.id);e("setKeep",t.data)}catch(a){console.error(a)}},async addToKeep({commit:e,dispatch:t},s){try{await E.put("keeps/"+s.id,s)}catch(a){console.error(a)}},async getKeepsByUser({commit:e,dispatch:t},s){try{let t=await E.get("keeps/user");e("setKeeps",t.data)}catch(a){console.error(a)}},async createKeep({commit:e,dispatch:t},s){try{await E.post("keeps",s),t("getKeepsByUser")}catch(a){console.error(a)}},async deleteKeep({commit:e,dispatch:t},s){try{await E.delete("keeps/"+s)}catch(a){console.error(a)}},
//!SECTION 
async getVaults({commit:e,dispatch:t}){try{let t=await E.get("vaults");e("setVaults",t.data)}catch(s){console.error(s)}},async getVault({commit:e,dispatch:t},s){try{let o=await E.get("vaults/"+s);e("setVault",o.data),t("getVaultKeeps",s)}catch(a){console.error(a)}},async createVault({commit:e,dispatch:t},s){try{await E.post("vaults",s),t("getVaults")}catch(a){console.error(a)}},async deleteVault({commit:e,dispatch:t},s){try{await E.delete("vaults/"+s)}catch(a){console.error(a)}},
//!SECTION 
async getVaultKeeps({commit:e,dispatch:t},s){try{let t=await E.get("vaultkeeps/"+s);e("setKeeps",t.data)}catch(a){console.error(a)}},async storeKeep({commit:e,dispatch:t},s){try{await E.post("vaultkeeps",s);let e=await E.get("keeps/"+s.keepId);t("addToKeep",{id:s.keepId,stores:e.data.stores+1,views:e.data.views})}catch(a){console.error(a)}},async removeKeep({commit:e,dispatch:t},s){try{await E.put("vaultkeeps",s),t("getVaults")}catch(a){console.error(a)}}}});async function I(){let e=await O.Authenticate();e&&M.commit("setUser",e),new a["a"]({router:P,store:M,render:e=>e(l)}).$mount("#app")}I()},"64a9":function(e,t,s){},8079:function(e,t,s){},"8dc0":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"keepComp card mx-2 my-2"},[s("img",{staticClass:"card-img-top mt-2",attrs:{src:e.keepProp.img,"data-toggle":"modal","data-target":"#keepView"+e.keepProp.id},on:{click:e.viewKeep}}),s("div",{staticClass:"card-body"},[s("h3",{staticClass:"card-title"},[e._v(e._s(e.keepProp.name))]),s("i",{staticClass:"far fa-eye fa-2x bg-primary badge-pill py-1",attrs:{"data-toggle":"tooltip",title:"Views"}},[e._v(e._s(e.keepProp.views))]),s("i",{staticClass:"fas fa-save fa-2x btn-success badge-pill py-1",attrs:{"data-toggle":"dropdown"}},[e._v(e._s(e.keepProp.stores))]),s("div",{staticClass:"dropdown-menu"},e._l(e.vaults,function(t){return s("p",{key:t.id,staticClass:"dropdown-item",on:{click:function(s){e.storeKeep(t.id)}}},[e._v(e._s(t.name))])}))]),s("KeepView",{attrs:{keepProp:e.keepProp}})],1)},o=[],r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"keepView modal fade row justify-content-center mt-5",attrs:{id:"keepView"+e.keepProp.id,tabindex:"-1",role:"dialog"}},[s("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("div",{staticClass:"card col-12"},[s("img",{staticClass:"card-img-top mt-2",attrs:{src:e.keepProp.img}}),s("div",{staticClass:"card-body"},[s("h1",{staticClass:"card-title"},[e._v(e._s(e.keepProp.name))]),s("h4",[e._v(e._s(e.keepProp.description))]),s("i",{staticClass:"far fa-eye fa-2x bg-primary badge-pill py-1",attrs:{"data-toggle":"tooltip",title:"Views"}},[e._v(e._s(e.keepProp.views))]),s("i",{staticClass:"fas fa-save fa-2x btn-success badge-pill py-1",attrs:{"data-toggle":"dropdown"}},[e._v(e._s(e.keepProp.stores))]),s("div",{staticClass:"dropdown-menu"},e._l(e.vaults,function(t){return s("p",{key:t.id,staticClass:"dropdown-item",on:{click:function(s){e.storeKeep(t.id)}}},[e._v(e._s(t.name))])}))]),s("span",{attrs:{"data-toggle":"tooltip",title:"Delete this keep"}},[e.user.id==e.keepProp.userId?s("i",{staticClass:"fas fa-trash text-danger m-2",on:{click:e.deleteKeep}}):e._e()]),s("span",{attrs:{"data-toggle":"tooltip",title:"Remove this keep from this vault"}},[this.$route.params.id?s("i",{staticClass:"fas fa-ban text-danger m-3",on:{click:e.removeKeep}}):e._e()])])])])])])},i=[],n=s("3d20"),c=s.n(n),l={name:"keepView",data(){return{keep:{}}},computed:{user(){return this.$store.state.user},vaults(){return this.$store.state.vaults}},mounted(){$(function(){$('[data-toggle="tooltip"]').tooltip()})},methods:{deleteKeep(){c.a.fire({title:"Do you want to delete this keep?",text:"This can't be undone!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(e=>{e.value&&($("#keepView"+this.keepProp.id).modal("hide"),this.$store.dispatch("deleteKeep",this.keepProp.id).then(e=>{"myKeeps"==this.$route.name?this.$store.dispatch("getKeepsByUser"):this.$store.dispatch("getKeeps")}))})},removeKeep(){c.a.fire({title:"Are you sure you want to remove this keep from this vault?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, remove it!"}).then(e=>{e.value&&this.$store.dispatch("removeKeep",{keepId:this.keepProp.id,vaultId:parseInt(this.$route.params.id)})})},storeKeep(e){this.$store.dispatch("storeKeep",{keepId:this.keepProp.id,vaultId:e}).then(e=>{"myKeeps"==this.$route.name?this.$store.dispatch("getKeepsByUser"):"home"==this.$route.name?this.$store.dispatch("getKeeps"):this.$store.dispatch("getVaultKeeps")})}},components:{},props:["keepProp"]},p=l,u=(s("4b2f"),s("2877")),d=Object(u["a"])(p,r,i,!1,null,"78906eb7",null),m=d.exports,h={name:"keepComp",data(){return{}},computed:{vaults(){return this.$store.state.vaults}},mounted(){$(function(){$('[data-toggle="tooltip"]').tooltip()})},methods:{viewKeep(){this.$store.dispatch("addToKeep",{id:this.keepProp.id,views:this.keepProp.views+1,stores:this.keepProp.stores}).then(e=>{"myKeeps"==this.$route.name?this.$store.dispatch("getKeepsByUser"):"home"==this.$route.name?this.$store.dispatch("getKeeps"):this.$store.dispatch("getVaultKeeps")})},storeKeep(e){this.$store.dispatch("storeKeep",{keepId:this.keepProp.id,vaultId:e}).then(e=>{"myKeeps"==this.$route.name?this.$store.dispatch("getKeepsByUser"):"home"==this.$route.name?this.$store.dispatch("getKeeps"):this.$store.dispatch("getVaultKeeps")})}},components:{KeepView:m},props:["keepProp"]},g=h,v=(s("1a47"),Object(u["a"])(g,a,o,!1,null,"f4198ca4",null));t["a"]=v.exports},"99fd":function(e,t,s){},cccb:function(e,t,s){"use strict";var a=s("d563"),o=s.n(a);o.a},d563:function(e,t,s){},ee9c:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"dropdown"},[s("i",{staticClass:"fas fa-bars text-light fa-3x",attrs:{"data-toggle":"dropdown"}}),s("div",{staticClass:"dropdown-menu"},[s("p",{staticClass:"dropdown-item",on:{click:function(t){e.goToKeeps()}}},[e._v("The Keeps")]),s("p",{staticClass:"dropdown-item",on:{click:function(t){e.goToVaults()}}},[e._v("My Vaults")]),s("p",{staticClass:"dropdown-item",on:{click:function(t){e.goToMyKeeps()}}},[e._v("My Keeps")])])])},o=[],r={name:"dropdown",data(){return{}},computed:{},methods:{goToKeeps(){this.$router.push("/")},goToVaults(){this.$router.push("/vaults")},goToMyKeeps(){this.$router.push("/myKeeps")}},components:{}},i=r,n=s("2877"),c=Object(n["a"])(i,a,o,!1,null,"81eb70fc",null);t["a"]=c.exports}});